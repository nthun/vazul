<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Blinding with vazul • vazul</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="data_blinding_functions_files/libs/quarto-html/popper.min.js"></script><script src="data_blinding_functions_files/libs/quarto-html/tippy.umd.min.js"></script><link href="data_blinding_functions_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data_blinding_functions_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Blinding with vazul">
<meta property="og:image" content="https://nthun.github.io/vazul/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vazul</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data_blinding_functions.html">Data Blinding with vazul</a></li>
    <li><a class="dropdown-item" href="../articles/using_mask_names.html">Masking variable names</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Data Blinding with vazul</h1>





      <div class="d-none name"><code></code></div>
    </div>






    <section class="level2"><h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>vazul</code> package provides functions for data blinding in research contexts. Data blinding helps prevent researcher bias by anonymizing data while preserving analytical validity. This vignette introduces the main functions and demonstrates their usage with practical examples.</p>
<p>There are two primary approaches to data blinding:</p>
<ol type="1">
<li>
<strong>Masking</strong>: Replaces original values with anonymous labels, completely hiding the original information.</li>
<li>
<strong>Scrambling</strong>: Randomizes the order of existing values while preserving all original data content.</li>
</ol>
<p>Each approach is available at three levels:</p>
<ul>
<li>
<strong>Vector level</strong>: <code><a href="../reference/mask_labels.html">mask_labels()</a></code> and <code><a href="../reference/scramble_values.html">scramble_values()</a></code> - operate on single vectors</li>
<li>
<strong>Data frame level</strong>: <code><a href="../reference/mask_variables.html">mask_variables()</a></code> and <code><a href="../reference/scramble_variables.html">scramble_variables()</a></code> - operate on columns in a data frame</li>
<li>
<strong>Row-wise level</strong>: <code><a href="../reference/mask_variables_rowwise.html">mask_variables_rowwise()</a></code> and <code><a href="../reference/scramble_variables_rowwise.html">scramble_variables_rowwise()</a></code> - operate within rows across columns</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nthun.github.io/vazul/">vazul</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level2"><h2 id="masking-functions">Masking Functions<a class="anchor" aria-label="anchor" href="#masking-functions"></a>
</h2>
<p>Masking functions replace categorical values with anonymous labels. This is useful when you want to completely hide the original information, such as treatment conditions or group assignments.</p>
<section class="level3"><h3 id="mask_labels---mask-vector-values">
<code>mask_labels()</code> - Mask Vector Values<a class="anchor" aria-label="anchor" href="#mask_labels---mask-vector-values"></a>
</h3>
<p>The <code><a href="../reference/mask_labels.html">mask_labels()</a></code> function takes a character or factor vector and replaces each unique value with a randomly assigned masked label.</p>
<section class="level4"><h4 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h4>
<ul>
<li>
<code>x</code>: A character or factor vector to mask</li>
<li>
<code>prefix</code>: Character string to use as prefix for masked labels (default: <code>"masked_group_"</code>)</li>
</ul></section><section class="level4"><h4 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a simple treatment vector</span></span>
<span><span class="va">treatment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"treatment"</span>, <span class="st">"control"</span>, <span class="st">"treatment"</span>, <span class="st">"control"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mask the labels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">masked_treatment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mask_labels.html">mask_labels</a></span><span class="op">(</span><span class="va">treatment</span><span class="op">)</span></span>
<span><span class="va">masked_treatment</span></span>
<span><span class="co">#&gt;           control         treatment           control         treatment </span></span>
<span><span class="co">#&gt; "masked_group_01" "masked_group_02" "masked_group_01" "masked_group_02" </span></span>
<span><span class="co">#&gt;           control </span></span>
<span><span class="co">#&gt; "masked_group_01"</span></span></code></pre></div>
</div>
<p>Notice that:</p>
<ul>
<li>Each unique value receives a unique masked label</li>
<li>The same original value always maps to the same masked label</li>
<li>The assignment of masked labels to original values is randomized</li>
</ul></section><section class="level4"><h4 id="custom-prefix">Custom Prefix<a class="anchor" aria-label="anchor" href="#custom-prefix"></a>
</h4>
<p>You can customize the prefix used for masked labels:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">456</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mask_labels.html">mask_labels</a></span><span class="op">(</span><span class="va">treatment</span>, prefix <span class="op">=</span> <span class="st">"group_"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    control  treatment    control  treatment    control </span></span>
<span><span class="co">#&gt; "group_01" "group_02" "group_01" "group_02" "group_01"</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">789</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mask_labels.html">mask_labels</a></span><span class="op">(</span><span class="va">treatment</span>, prefix <span class="op">=</span> <span class="st">"condition_"</span><span class="op">)</span></span>
<span><span class="co">#&gt;        control      treatment        control      treatment        control </span></span>
<span><span class="co">#&gt; "condition_01" "condition_02" "condition_01" "condition_02" "condition_01"</span></span></code></pre></div>
</div>
</section><section class="level4"><h4 id="working-with-factors">Working with Factors<a class="anchor" aria-label="anchor" href="#working-with-factors"></a>
</h4>
<p>The function preserves factor structure when the input is a factor:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a factor vector</span></span>
<span><span class="va">ecology</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Desperate"</span>, <span class="st">"Hopeful"</span>, <span class="st">"Desperate"</span>, <span class="st">"Hopeful"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">masked_ecology</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mask_labels.html">mask_labels</a></span><span class="op">(</span><span class="va">ecology</span><span class="op">)</span></span>
<span><span class="va">masked_ecology</span></span>
<span><span class="co">#&gt;       Desperate         Hopeful       Desperate         Hopeful </span></span>
<span><span class="co">#&gt; masked_group_01 masked_group_02 masked_group_01 masked_group_02 </span></span>
<span><span class="co">#&gt; Levels: masked_group_01 masked_group_02</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">masked_ecology</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "factor"</span></span></code></pre></div>
</div>
</section><section class="level4"><h4 id="practical-example-with-dataset">Practical Example with Dataset<a class="anchor" aria-label="anchor" href="#practical-example-with-dataset"></a>
</h4>
<p>Let’s use the <code>williams</code> dataset to mask the ecology condition:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">williams</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">williams</span><span class="op">$</span><span class="va">ecology_masked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mask_labels.html">mask_labels</a></span><span class="op">(</span><span class="va">williams</span><span class="op">$</span><span class="va">ecology</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare original and masked values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">williams</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"subject"</span>, <span class="st">"ecology"</span>, <span class="st">"ecology_masked"</span><span class="op">)</span><span class="op">]</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 3</span></span>
<span><span class="co">#&gt;    subject        ecology   ecology_masked </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;          </span></span>
<span><span class="co">#&gt;  1 A30MP4LXV4MIFD Hopeful   masked_group_01</span></span>
<span><span class="co">#&gt;  2 A16X5FB3HAFCKN Desperate masked_group_02</span></span>
<span><span class="co">#&gt;  3 A1E9D1OT9VJYDZ Desperate masked_group_02</span></span>
<span><span class="co">#&gt;  4 A16FPOYD7566WI Hopeful   masked_group_01</span></span>
<span><span class="co">#&gt;  5 A11NOTVHWST7Y3 Desperate masked_group_02</span></span>
<span><span class="co">#&gt;  6 A3TDR6MXS6UO5Z Desperate masked_group_02</span></span>
<span><span class="co">#&gt;  7 A3OD4F0SA7EBCL Desperate masked_group_02</span></span>
<span><span class="co">#&gt;  8 A123PBQDU71I5O Hopeful   masked_group_01</span></span>
<span><span class="co">#&gt;  9 A25NGIY591U3DK Hopeful   masked_group_01</span></span>
<span><span class="co">#&gt; 10 A11WCFPJSR5VZP Desperate masked_group_02</span></span></code></pre></div>
</div>
<p>Now researchers can analyze the data without knowing which condition is “Desperate” vs “Hopeful”.</p>
</section></section><section class="level3"><h3 id="mask_variables---mask-data-frame-columns">
<code>mask_variables()</code> - Mask Data Frame Columns<a class="anchor" aria-label="anchor" href="#mask_variables---mask-data-frame-columns"></a>
</h3>
<p>The <code><a href="../reference/mask_variables.html">mask_variables()</a></code> function applies masking to multiple columns in a data frame simultaneously.</p>
<section class="level4"><h4 id="parameters-1">Parameters<a class="anchor" aria-label="anchor" href="#parameters-1"></a>
</h4>
<ul>
<li>
<code>data</code>: A data frame</li>
<li>
<code>...</code>: Columns to mask (supports tidyselect helpers)</li>
<li>
<code>across_variables</code>: If <code>TRUE</code>, all selected variables share the same masked labels; if <code>FALSE</code> (default), each variable gets independent masked labels</li>
</ul></section><section class="level4"><h4 id="independent-masking-default">Independent Masking (Default)<a class="anchor" aria-label="anchor" href="#independent-masking-default"></a>
</h4>
<p>By default, each column gets its own set of masked labels with the column name as prefix:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"intervention"</span>, <span class="st">"control"</span>, <span class="st">"intervention"</span><span class="op">)</span>,</span>
<span>  outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"success"</span>, <span class="st">"failure"</span>, <span class="st">"success"</span>, <span class="st">"failure"</span><span class="op">)</span>,</span>
<span>  score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">85</span>, <span class="fl">92</span>, <span class="fl">78</span>, <span class="fl">88</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mask_variables.html">mask_variables</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treatment"</span>, <span class="st">"outcome"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;            treatment          outcome score</span></span>
<span><span class="co">#&gt; 1 treatment_group_01 outcome_group_01    85</span></span>
<span><span class="co">#&gt; 2 treatment_group_02 outcome_group_02    92</span></span>
<span><span class="co">#&gt; 3 treatment_group_01 outcome_group_01    78</span></span>
<span><span class="co">#&gt; 4 treatment_group_02 outcome_group_02    88</span></span></code></pre></div>
</div>
<p>Notice that each column now has its own prefix (<code>treatment_group_</code>, <code>outcome_group_</code>).</p>
</section><section class="level4"><h4 id="shared-masking-across-variables">Shared Masking Across Variables<a class="anchor" aria-label="anchor" href="#shared-masking-across-variables"></a>
</h4>
<p>When <code>across_variables = TRUE</code>, all selected columns share the same mapping:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  pre_condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"A"</span><span class="op">)</span>,</span>
<span>  post_condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"C"</span><span class="op">)</span>,</span>
<span>  score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">456</span><span class="op">)</span></span>
<span><span class="va">result_shared</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mask_variables.html">mask_variables</a></span><span class="op">(</span><span class="va">df2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pre_condition"</span>, <span class="st">"post_condition"</span><span class="op">)</span>,</span>
<span>                                across_variables <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">result_shared</span></span>
<span><span class="co">#&gt;     pre_condition  post_condition score</span></span>
<span><span class="co">#&gt; 1 masked_group_01 masked_group_03     1</span></span>
<span><span class="co">#&gt; 2 masked_group_03 masked_group_01     2</span></span>
<span><span class="co">#&gt; 3 masked_group_02 masked_group_01     3</span></span>
<span><span class="co">#&gt; 4 masked_group_01 masked_group_02     4</span></span></code></pre></div>
</div>
<p>With shared masking, value “A” maps to the same label in both columns.</p>
</section><section class="level4"><h4 id="using-tidyselect-helpers">Using tidyselect Helpers<a class="anchor" aria-label="anchor" href="#using-tidyselect-helpers"></a>
</h4>
<p>You can use tidyselect helpers to select columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">789</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mask_variables.html">mask_variables</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;            treatment          outcome score</span></span>
<span><span class="co">#&gt; 1 treatment_group_01 outcome_group_02    85</span></span>
<span><span class="co">#&gt; 2 treatment_group_02 outcome_group_01    92</span></span>
<span><span class="co">#&gt; 3 treatment_group_01 outcome_group_02    78</span></span>
<span><span class="co">#&gt; 4 treatment_group_02 outcome_group_01    88</span></span></code></pre></div>
</div>
</section></section><section class="level3"><h3 id="mask_variables_rowwise---row-level-masking">
<code>mask_variables_rowwise()</code> - Row-Level Masking<a class="anchor" aria-label="anchor" href="#mask_variables_rowwise---row-level-masking"></a>
</h3>
<p>The <code><a href="../reference/mask_variables_rowwise.html">mask_variables_rowwise()</a></code> function applies consistent masking within each row across multiple columns. This is useful when you have repeated measures or matched conditions.</p>
<section class="level4"><h4 id="parameters-2">Parameters<a class="anchor" aria-label="anchor" href="#parameters-2"></a>
</h4>
<ul>
<li>
<code>data</code>: A data frame</li>
<li>
<code>...</code>: Column sets to mask (supports tidyselect helpers)</li>
<li>
<code>prefix</code>: Character string to use as prefix for masked labels (default: <code>"masked_group_"</code>)</li>
</ul></section><section class="level4"><h4 id="example-masking-repeated-conditions">Example: Masking Repeated Conditions<a class="anchor" aria-label="anchor" href="#example-masking-repeated-conditions"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  treat_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"treatment"</span>, <span class="st">"placebo"</span><span class="op">)</span>,</span>
<span>  treat_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treatment"</span>, <span class="st">"placebo"</span>, <span class="st">"control"</span><span class="op">)</span>,</span>
<span>  treat_3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"placebo"</span>, <span class="st">"control"</span>, <span class="st">"treatment"</span><span class="op">)</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mask_variables_rowwise.html">mask_variables_rowwise</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"treat_"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;           treat_1         treat_2         treat_3 id</span></span>
<span><span class="co">#&gt; 1 masked_group_03 masked_group_01 masked_group_02  1</span></span>
<span><span class="co">#&gt; 2 masked_group_01 masked_group_02 masked_group_03  2</span></span>
<span><span class="co">#&gt; 3 masked_group_02 masked_group_03 masked_group_01  3</span></span></code></pre></div>
</div>
<p>Within each row, the original values are consistently mapped to masked labels, but the mapping is independent across rows.</p>
</section></section></section><section class="level2"><h2 id="scrambling-functions">Scrambling Functions<a class="anchor" aria-label="anchor" href="#scrambling-functions"></a>
</h2>
<p>Scrambling functions randomize the order of values while preserving all original data content. This approach maintains the data distribution while breaking the connection between observations and their original values.</p>
<section class="level3"><h3 id="scramble_values---scramble-vector-order">
<code>scramble_values()</code> - Scramble Vector Order<a class="anchor" aria-label="anchor" href="#scramble_values---scramble-vector-order"></a>
</h3>
<p>The <code><a href="../reference/scramble_values.html">scramble_values()</a></code> function randomly reorders the elements of a vector.</p>
<section class="level4"><h4 id="parameters-3">Parameters<a class="anchor" aria-label="anchor" href="#parameters-3"></a>
</h4>
<ul>
<li>
<code>x</code>: A vector to scramble</li>
</ul></section><section class="level4"><h4 id="basic-usage-with-different-data-types">Basic Usage with Different Data Types<a class="anchor" aria-label="anchor" href="#basic-usage-with-different-data-types"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Numeric data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">numbers</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span>
<span><span class="fu"><a href="../reference/scramble_values.html">scramble_values</a></span><span class="op">(</span><span class="va">numbers</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1]  3 10  2  8  6  9  1  7  5  4</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Character data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">456</span><span class="op">)</span></span>
<span><span class="va">letters_vec</span> <span class="op">&lt;-</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="fu"><a href="../reference/scramble_values.html">scramble_values</a></span><span class="op">(</span><span class="va">letters_vec</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "e" "a" "c" "b" "d"</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Factor data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">789</span><span class="op">)</span></span>
<span><span class="va">conditions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/scramble_values.html">scramble_values</a></span><span class="op">(</span><span class="va">conditions</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] B A B C A</span></span>
<span><span class="co">#&gt; Levels: A B C</span></span></code></pre></div>
</div>
</section><section class="level4"><h4 id="key-properties">Key Properties<a class="anchor" aria-label="anchor" href="#key-properties"></a>
</h4>
<p>Scrambling preserves:</p>
<ul>
<li>All original values (nothing is lost or changed)</li>
<li>The data type</li>
<li>The distribution of values</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">original</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">scrambled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scramble_values.html">scramble_values</a></span><span class="op">(</span><span class="va">original</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Same values, different order</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">original</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">scrambled</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</span></span>
<span></span>
<span><span class="co"># Same frequency distribution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">original</span><span class="op">)</span></span>
<span><span class="co">#&gt; original</span></span>
<span><span class="co">#&gt; 1 2 3 4 </span></span>
<span><span class="co">#&gt; 1 2 3 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">scrambled</span><span class="op">)</span></span>
<span><span class="co">#&gt; scrambled</span></span>
<span><span class="co">#&gt; 1 2 3 4 </span></span>
<span><span class="co">#&gt; 1 2 3 4</span></span></code></pre></div>
</div>
</section><section class="level4"><h4 id="practical-example-with-dataset-1">Practical Example with Dataset<a class="anchor" aria-label="anchor" href="#practical-example-with-dataset-1"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">williams</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">williams</span><span class="op">$</span><span class="va">age_scrambled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scramble_values.html">scramble_values</a></span><span class="op">(</span><span class="va">williams</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The values are the same, just reordered</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">williams</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   21.00   26.00   32.00   34.04   38.00   71.00</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">williams</span><span class="op">$</span><span class="va">age_scrambled</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   21.00   26.00   32.00   34.04   38.00   71.00</span></span>
<span></span>
<span><span class="co"># But individual correspondences are broken</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">williams</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"subject"</span>, <span class="st">"age"</span>, <span class="st">"age_scrambled"</span><span class="op">)</span><span class="op">]</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 3</span></span>
<span><span class="co">#&gt;    subject          age age_scrambled</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;          &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 A30MP4LXV4MIFD    34            25</span></span>
<span><span class="co">#&gt;  2 A16X5FB3HAFCKN    30            26</span></span>
<span><span class="co">#&gt;  3 A1E9D1OT9VJYDZ    40            25</span></span>
<span><span class="co">#&gt;  4 A16FPOYD7566WI    35            38</span></span>
<span><span class="co">#&gt;  5 A11NOTVHWST7Y3    26            25</span></span>
<span><span class="co">#&gt;  6 A3TDR6MXS6UO5Z    33            28</span></span>
<span><span class="co">#&gt;  7 A3OD4F0SA7EBCL    33            57</span></span>
<span><span class="co">#&gt;  8 A123PBQDU71I5O    30            32</span></span>
<span><span class="co">#&gt;  9 A25NGIY591U3DK    48            25</span></span>
<span><span class="co">#&gt; 10 A11WCFPJSR5VZP    33            43</span></span></code></pre></div>
</div>
</section></section><section class="level3"><h3 id="scramble_variables---scramble-data-frame-columns">
<code>scramble_variables()</code> - Scramble Data Frame Columns<a class="anchor" aria-label="anchor" href="#scramble_variables---scramble-data-frame-columns"></a>
</h3>
<p>The <code><a href="../reference/scramble_variables.html">scramble_variables()</a></code> function scrambles the values of specified columns in a data frame.</p>
<section class="level4"><h4 id="parameters-4">Parameters<a class="anchor" aria-label="anchor" href="#parameters-4"></a>
</h4>
<ul>
<li>
<code>data</code>: A data frame</li>
<li>
<code>cols</code>: Columns to scramble (supports tidyselect helpers)</li>
<li>
<code>together</code>: If <code>TRUE</code>, variables are scrambled together as a unit per row; if <code>FALSE</code> (default), each variable is scrambled independently</li>
<li>
<code>.groups</code>: Optional grouping columns for within-group scrambling</li>
</ul></section><section class="level4"><h4 id="independent-scrambling-default">Independent Scrambling (Default)<a class="anchor" aria-label="anchor" href="#independent-scrambling-default"></a>
</h4>
<p>Each column is scrambled independently:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span>
<span>  y <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"B"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/scramble_variables.html">scramble_variables</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   x y group</span></span>
<span><span class="co">#&gt; 1 3 e     A</span></span>
<span><span class="co">#&gt; 2 6 d     A</span></span>
<span><span class="co">#&gt; 3 2 b     A</span></span>
<span><span class="co">#&gt; 4 4 f     B</span></span>
<span><span class="co">#&gt; 5 5 a     B</span></span>
<span><span class="co">#&gt; 6 1 c     B</span></span></code></pre></div>
</div>
<p>Notice that <code>x</code> and <code>y</code> are scrambled independently of each other.</p>
</section><section class="level4"><h4 id="scrambling-together">Scrambling Together<a class="anchor" aria-label="anchor" href="#scrambling-together"></a>
</h4>
<p>When <code>together = TRUE</code>, the selected columns are scrambled as a unit, preserving row-level relationships:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">456</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/scramble_variables.html">scramble_variables</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>, together <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;   x y group</span></span>
<span><span class="co">#&gt; 1 5 e     A</span></span>
<span><span class="co">#&gt; 2 6 f     A</span></span>
<span><span class="co">#&gt; 3 3 c     A</span></span>
<span><span class="co">#&gt; 4 2 b     B</span></span>
<span><span class="co">#&gt; 5 1 a     B</span></span>
<span><span class="co">#&gt; 6 4 d     B</span></span></code></pre></div>
</div>
<p>Notice that the pairs (1, “a”), (2, “b”), etc., remain intact but are assigned to different rows.</p>
</section><section class="level4"><h4 id="within-group-scrambling">Within-Group Scrambling<a class="anchor" aria-label="anchor" href="#within-group-scrambling"></a>
</h4>
<p>Use the <code>.groups</code> parameter to scramble within groups:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">789</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/scramble_variables.html">scramble_variables</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"x"</span>, .groups <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;       x y     group</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 a     A    </span></span>
<span><span class="co">#&gt; 2     2 b     A    </span></span>
<span><span class="co">#&gt; 3     3 c     A    </span></span>
<span><span class="co">#&gt; 4     5 d     B    </span></span>
<span><span class="co">#&gt; 5     6 e     B    </span></span>
<span><span class="co">#&gt; 6     4 f     B</span></span></code></pre></div>
</div>
<p>Values of <code>x</code> are only swapped within their original group (A or B).</p>
</section><section class="level4"><h4 id="combining-grouping-and-together">Combining Grouping and Together<a class="anchor" aria-label="anchor" href="#combining-grouping-and-together"></a>
</h4>
<p>You can combine both parameters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/scramble_variables.html">scramble_variables</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"group"</span>, together <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;       x y     group</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     2 b     A    </span></span>
<span><span class="co">#&gt; 2     1 a     A    </span></span>
<span><span class="co">#&gt; 3     3 c     A    </span></span>
<span><span class="co">#&gt; 4     6 f     B    </span></span>
<span><span class="co">#&gt; 5     4 d     B    </span></span>
<span><span class="co">#&gt; 6     5 e     B</span></span></code></pre></div>
</div>
</section><section class="level4"><h4 id="practical-example-with-dataset-2">Practical Example with Dataset<a class="anchor" aria-label="anchor" href="#practical-example-with-dataset-2"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">williams</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Scramble age and ecology within gender groups</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">williams_scrambled</span> <span class="op">&lt;-</span> <span class="va">williams</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/scramble_variables.html">scramble_variables</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"ecology"</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check that values are preserved within groups</span></span>
<span><span class="va">williams</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   gender mean_age</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1      1     33.8</span></span>
<span><span class="co">#&gt; 2      2     34.6</span></span>
<span></span>
<span><span class="va">williams_scrambled</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   gender mean_age</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1      1     33.8</span></span>
<span><span class="co">#&gt; 2      2     34.6</span></span></code></pre></div>
</div>
</section></section><section class="level3"><h3 id="scramble_variables_rowwise---row-level-scrambling">
<code>scramble_variables_rowwise()</code> - Row-Level Scrambling<a class="anchor" aria-label="anchor" href="#scramble_variables_rowwise---row-level-scrambling"></a>
</h3>
<p>The <code><a href="../reference/scramble_variables_rowwise.html">scramble_variables_rowwise()</a></code> function scrambles values within each row across specified columns. This is useful for scrambling repeated measures or item responses.</p>
<section class="level4"><h4 id="parameters-5">Parameters<a class="anchor" aria-label="anchor" href="#parameters-5"></a>
</h4>
<ul>
<li>
<code>data</code>: A data frame</li>
<li>
<code>...</code>: Column sets to scramble (supports tidyselect helpers)</li>
</ul></section><section class="level4"><h4 id="example-scrambling-item-responses">Example: Scrambling Item Responses<a class="anchor" aria-label="anchor" href="#example-scrambling-item-responses"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  item1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>  item2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  item3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">9</span><span class="op">)</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scramble_variables_rowwise.html">scramble_variables_rowwise</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"item1"</span>, <span class="st">"item2"</span>, <span class="st">"item3"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;   item1 item2 item3 id</span></span>
<span><span class="co">#&gt; 1     3     1     2  1</span></span>
<span><span class="co">#&gt; 2     5     4     6  2</span></span>
<span><span class="co">#&gt; 3     8     9     7  3</span></span></code></pre></div>
</div>
<p>Within each row, the values are shuffled among the item columns.</p>
</section><section class="level4"><h4 id="multiple-column-sets">Multiple Column Sets<a class="anchor" aria-label="anchor" href="#multiple-column-sets"></a>
</h4>
<p>You can scramble multiple sets of columns independently:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  day_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>  day_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  day_3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">9</span><span class="op">)</span>,</span>
<span>  score_a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">40</span>, <span class="fl">70</span><span class="op">)</span>,</span>
<span>  score_b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">50</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">456</span><span class="op">)</span></span>
<span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scramble_variables_rowwise.html">scramble_variables_rowwise</a></span><span class="op">(</span></span>
<span>  <span class="va">df2</span>,</span>
<span>  <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"day_"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"score_a"</span>, <span class="st">"score_b"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">result2</span></span>
<span><span class="co">#&gt;   day_1 day_2 day_3 score_a score_b id</span></span>
<span><span class="co">#&gt; 1     1     3     2      10      20  1</span></span>
<span><span class="co">#&gt; 2     5     4     6      40      50  2</span></span>
<span><span class="co">#&gt; 3     9     7     8      80      70  3</span></span></code></pre></div>
</div>
</section></section></section><section class="level2"><h2 id="choosing-between-masking-and-scrambling">Choosing Between Masking and Scrambling<a class="anchor" aria-label="anchor" href="#choosing-between-masking-and-scrambling"></a>
</h2>
<table class="table caption-top">
<thead><tr class="header">
<th>Aspect</th>
<th>Masking</th>
<th>Scrambling</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Original values</strong></td>
<td>Hidden (replaced)</td>
<td>Preserved (reordered)</td>
</tr>
<tr class="even">
<td><strong>Distribution</strong></td>
<td>Changed (new labels)</td>
<td>Unchanged</td>
</tr>
<tr class="odd">
<td><strong>Best for</strong></td>
<td>Categorical variables</td>
<td>Numeric or categorical</td>
</tr>
<tr class="even">
<td><strong>Use case</strong></td>
<td>Hide treatment conditions</td>
<td>Break individual links</td>
</tr>
<tr class="odd">
<td><strong>Reversibility</strong></td>
<td>Requires mapping key</td>
<td>Irreversible</td>
</tr>
</tbody>
</table>
<section class="level3"><h3 id="when-to-use-masking">When to Use Masking<a class="anchor" aria-label="anchor" href="#when-to-use-masking"></a>
</h3>
<ul>
<li>When you need to hide categorical labels (e.g., treatment conditions, group names)</li>
<li>When analysts should not know the meaning of categories</li>
<li>When you want different prefixes for different variables</li>
</ul></section><section class="level3"><h3 id="when-to-use-scrambling">When to Use Scrambling<a class="anchor" aria-label="anchor" href="#when-to-use-scrambling"></a>
</h3>
<ul>
<li>When you want to preserve the original data distribution</li>
<li>When you need to break the link between observations and values</li>
<li>When working with numeric data that shouldn’t be categorically relabeled</li>
</ul></section></section><section class="level2"><h2 id="working-with-included-datasets">Working with Included Datasets<a class="anchor" aria-label="anchor" href="#working-with-included-datasets"></a>
</h2>
<p>The <code>vazul</code> package includes two research datasets for demonstration and practice.</p>
<section class="level3"><h3 id="marp-dataset">MARP Dataset<a class="anchor" aria-label="anchor" href="#marp-dataset"></a>
</h3>
<p>The Many Analysts Religion Project (MARP) dataset contains 10,535 participants from 24 countries:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">marp</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">marp</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 10535    46</span></span>
<span></span>
<span><span class="co"># Example: Scramble religiosity scores within countries</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">marp_blinded</span> <span class="op">&lt;-</span> <span class="va">marp</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/scramble_variables.html">scramble_variables</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"rel_"</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original and scrambled have same country-level means</span></span>
<span><span class="va">original_means</span> <span class="op">&lt;-</span> <span class="va">marp</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>rel_1_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">rel_1</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scrambled_means</span> <span class="op">&lt;-</span> <span class="va">marp_blinded</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>rel_1_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">rel_1</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">original_means</span><span class="op">$</span><span class="va">rel_1_mean</span>, <span class="va">scrambled_means</span><span class="op">$</span><span class="va">rel_1_mean</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
</section><section class="level3"><h3 id="williams-dataset">Williams Dataset<a class="anchor" aria-label="anchor" href="#williams-dataset"></a>
</h3>
<p>The Williams study dataset contains 112 participants from a stereotyping study:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">williams</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">williams</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 112  25</span></span>
<span></span>
<span><span class="co"># Example: Mask the ecology condition for blind analysis</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">williams_blinded</span> <span class="op">&lt;-</span> <span class="va">williams</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/mask_variables.html">mask_variables</a></span><span class="op">(</span><span class="st">"ecology"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Analysts can work with masked conditions</span></span>
<span><span class="va">williams_blinded</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ecology</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    mean_impulsivity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Impuls_1</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;   ecology              n mean_impulsivity</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;int&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 ecology_group_01    56             4.32</span></span>
<span><span class="co">#&gt; 2 ecology_group_02    56             4.61</span></span></code></pre></div>
</div>
</section></section><section class="level2"><h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The <code>vazul</code> package provides a comprehensive toolkit for data blinding:</p>
<table class="table caption-top">
<colgroup>
<col style="width: 38%">
<col style="width: 26%">
<col style="width: 34%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Level</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/mask_labels.html">mask_labels()</a></code></td>
<td>Vector</td>
<td>Replace categorical values with anonymous labels</td>
</tr>
<tr class="even">
<td><code><a href="../reference/mask_variables.html">mask_variables()</a></code></td>
<td>Data frame</td>
<td>Mask multiple columns</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/mask_variables_rowwise.html">mask_variables_rowwise()</a></code></td>
<td>Row-wise</td>
<td>Consistent masking within rows</td>
</tr>
<tr class="even">
<td><code><a href="../reference/scramble_values.html">scramble_values()</a></code></td>
<td>Vector</td>
<td>Randomize value order</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/scramble_variables.html">scramble_variables()</a></code></td>
<td>Data frame</td>
<td>Scramble multiple columns</td>
</tr>
<tr class="even">
<td><code><a href="../reference/scramble_variables_rowwise.html">scramble_variables_rowwise()</a></code></td>
<td>Row-wise</td>
<td>Scramble values within rows</td>
</tr>
</tbody>
</table>
<p>These functions help researchers conduct unbiased analyses by separating the analyst from knowledge about treatment conditions, group assignments, or individual data points.</p>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tamás Nagy, Alexandra Sarafoglou, Márton Kovács.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
